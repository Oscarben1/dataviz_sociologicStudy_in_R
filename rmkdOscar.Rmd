---
title: "RmrkdOscar"
author: "Oscar"
date: "23/04/2021"
output: html_document
---

Importons ici toutes les libraries utiles à notre projet
```{r message = FALSE}
library(readr)
library(ggplot2)
library(dplyr)
```


Importons dans un premier temps les datasets

```{r message = FALSE}
dfMaths <- read_csv("data/student-mat.csv")
head(dfMaths)
dfPortugais <- read_csv("data/student-por.csv")
head(dfPortugais)
```

Regardons l'influence du sexe sur les résultats à l'école, en maths et en portugais

----------------------------------------------------------

Tout d'abord, regardons les effectifs dans les différentes écoles pour avoir une vue d'ensemble

```{r message = FALSE}

ggplot(dfMaths, aes(x = school, fill = sex)) + 
  geom_bar(position = position_dodge(0.9)) + 
  scale_fill_brewer(palette = "Dark2") + 
  labs(fill = "Sexe", x = "Ecole", y = "Effectifs", title = "Part des effectifs Masculins et Féminins dans chaque école")
```

Regardons maintenant les effectifs par sexe selon les ages (entre 14 et 19 ans uniquement, les effectifs etant trop bas au dessus de cet age) pour comprendre un peu mieux la répartition des genres dans ces écoles, et dans ce dataset.

```{r message = FALSE}
#préparation des données
df <- dfMaths %>% filter(age < 20)

#Barplot 
ggplot(df, aes(x = age, fill = sex)) + 
    geom_bar(position = position_dodge(.9)) +
    scale_fill_brewer(palette = "Dark2") + 
    scale_x_continuous(breaks = seq(14, 19, 1)) +
    labs(fill = "Sexe", x = "Age", y = "Effectifs",title = "Part des effectifs Masculins et Féminins selon l'âge")
```

Regardons le nombre d'heures travaillées selon le genre

```{r message = FALSE}
#preparation des données
df <- dfMaths %>% select(sex, studytime)

#BoxPlot
ggplot(df, aes(x = sex, y = studytime)) + 
  geom_boxplot(aes(fill = sex),alpha = .6,size = 1) + 
  stat_summary(fun = "mean", geom = "point", shape= 21, size= 2, fill= "white") +
  scale_fill_brewer(palette = "Dark2") +
  ggtitle("Répartition des notes en fonction du genre")

```

On peut voir que les filles travaillent généralement plus que les garcons dans notre dataset. On peut alors se dire que le travail paye et qu'elles doivent obtenir de meilleurs résultats. Verifions le.

Regardons la note finale selon le genre

```{r message = FALSE}
#preparation des données
df <- dfMaths %>% select(sex, G3)

#BoxPlot
ggplot(df, aes(x = sex, y = G3)) + 
  geom_boxplot(aes(fill = sex),alpha = .6,size = 1) + 
  stat_summary(fun = "mean", geom = "point", shape= 21, size= 2, fill= "white") +
  scale_fill_brewer(palette = "Dark2") +
  ggtitle("Répartition des notes en fonction du genre")
  

```

Le graph nous montre que la moyenne des notes des garcons en maths est plus élevée que celle des filles, ce qui est étonnant puisque ces derniers travaillent moins que les filles. Réalisons la même étude pour le portugais.

BoxPlot repartition du temps de travail selon le sexe en matiere de portugais

```{r message = FALSE}
#preparation des données
df <- dfPortugais %>% select(sex, studytime)

#BoxPlot
ggplot(df, aes(x = sex, y = studytime)) + 
  geom_boxplot(aes(fill = sex),alpha = .6,size = 1) + 
  stat_summary(fun = "mean", geom = "point", shape= 21, size= 2, fill= "white") +
  scale_fill_brewer(palette = "Dark2") +
  ggtitle("Temps de travail en portugais en fonction du genre")

```
Les hommes travaillent en effet moins que les femmes en moyenne, en portugais également, mais cet écart se réduit pour la matière de portugais. Regardons le résultat sur les notes.

```{r message = FALSE}
#preparation des données
df <- dfPortugais %>% select(sex, G3)

#BoxPlot
ggplot(df, aes(x = sex, y = G3)) + 
  geom_boxplot(aes(fill = sex),alpha = .6,size = 1) + 
  stat_summary(fun = "mean", geom = "point", shape= 21, size= 2, fill= "white") +
  scale_fill_brewer(palette = "Dark2") +
  ggtitle("Répartition des notes en fonction du genre")
  

```

Cette fois-ci, le travail paye ! Les filles ont en effet de meilleurs résultats en portugais que les garcons.

```{r message = FALSE}
#preparation des données // NE MARCHE PAS JSP PQ
#df <- dfMaths %>% select(age, G3)
#head(df)

  #ggplot(df, aes(x=age, y=G3, fill=age)) + geom_boxplot()+labs(title="Repartition des notes finales G3 selon l'age",x="age", y = "Note finale")+
  # theme_classic()
```
